# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
	. /etc/bashrc
fi

# User specific environment
PATH="$HOME/.cabal/bin:$HOME/.ghcup/bin:$HOME/.local/bin:$PATH"
EDITOR="nvim"
export PATH

# Bash prompt
PS1="\[\e[0;32m\]\u@\h\[\e[0m\] \[\e[1m\]\[\e[34m\]\W\[\e[0m\]$ "

# Open manpages with neovim
export MANPAGER='nvim +Man!'
nvman ()
{
  nvim -c ":Man $1 | only"
}

# FZF config
export FZF_DEFAULT_COMMAND='ag --hidden --ignore .git --ignore .mozilla --ignore .cache --ignore .config --ignore .local -l -g ""'

# Uncomment the following line if you don't like systemctl's auto-paging feature:
# export SYSTEMD_PAGER=

# User specific aliases
alias ls='ls --color=auto'

GPG_TTY=$(tty)
export GPG_TTY

# Unlimited history
HISTSIZE= 
HISTFILESIZE=

# Record commands in history with timestamp
HISTTIMEFORMAT="%F %T "

# For Ubuntu development
export DEBFULLNAME="Preetham Gujjula"
export DEBEMAIL="ubuntu@mail.preetham.io"

# Haskell Stack
export STACK_XDG=1

# Haskell GHCup
export GHCUP_USE_XDG_DIRS=1

# Use fd (https://github.com/sharkdp/fd) for listing path candidates.
# - The first argument to the function ($1) is the base path to start traversal
# - See the source code (completion.{bash,zsh}) for the details.
_fzf_compgen_path() {
  fd --hidden --follow \
    --exclude ".git" \
    --exclude ".cache" \
    --exclude ".var" \
    --exclude ".nvm" \
    --exclude ".nix-profile" \
    --exclude ".local/share" \
    . "$1"
}

# Use fd to generate the list for directory completion
_fzf_compgen_dir() {
  fd --type d --hidden --follow --exclude ".git" . "$1"
}

# Reload ssh key in remote tmux
alias fixssh='eval $(tmux showenv -s SSH_AUTH_SOCK)'
